/* ===========================
   Theme toggle switch with labels (+ ripple)
   =========================== */
.theme-toggle {
  display:inline-flex; align-items:center; gap:.5rem;
  cursor:pointer; user-select:none; margin-left:.25rem;
}
.theme-toggle input { position:absolute; opacity:0; pointer-events:none; }

/* Track */
.theme-toggle__track{
  --track-bg: color-mix(in oklab, var(--muted) 15%, var(--bg));
  position:relative; width:64px; height:32px; border-radius:999px;
  background: var(--track-bg);
  border:1px solid color-mix(in oklab, var(--muted) 30%, transparent);
  display:inline-block; box-sizing:border-box; padding:2px;
  transition: background-color .25s ease, border-color .25s ease, box-shadow .25s ease;
}
.theme-toggle:hover .theme-toggle__track {
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--ring) 60%, transparent);
}

/* Thumb + ripple */
.theme-toggle__thumb{
  position:absolute; top:2px; left:2px; width:28px; height:28px; border-radius:999px;
  background: var(--card); box-shadow: 0 2px 6px rgba(0,0,0,.25); overflow:hidden;
}
.theme-toggle input:checked + .theme-toggle__track .theme-toggle__thumb { transform: translateX(32px) rotate(.001deg); }
.theme-toggle__thumb::after{
  content:""; position:absolute; top:50%; left:50%; width:100%; height:100%;
  border-radius:50%; background: color-mix(in oklab, #000 20%, transparent);
  transform: translate(-50%,-50%) scale(0); opacity:0; pointer-events:none;
}
.theme-toggle__thumb.ripple::after{
  transform: translate(-50%,-50%) scale(2.6);
  opacity:0; transition: transform 520ms ease, opacity 800ms ease;
}

/* Icons */
.theme-toggle__icon{
  position:absolute; top:50%; transform:translateY(-50%);
  font-size:.9rem; opacity:.75; pointer-events:none; transition:opacity .25s ease;
}
.theme-toggle__icon--sun { left: 10px; }
.theme-toggle__icon--moon { right: 10px; opacity: .35; }
.theme-toggle input:checked + .theme-toggle__track .theme-toggle__icon--sun { opacity: .35; }
.theme-toggle input:checked + .theme-toggle__track .theme-toggle__icon--moon { opacity: .85; }

/* Labels */
.theme-toggle__text{ display:flex; align-items:center; gap:.25rem; font-size:.9rem; }
.theme-toggle__sep{ opacity:.4; }
.theme-toggle__text-light, .theme-toggle__text-dark { transition: color .25s ease, opacity .25s ease; }
.theme-toggle .theme-toggle__text-light { color: var(--text); font-weight: 600; }
.theme-toggle .theme-toggle__text-dark  { color: var(--muted); }
.theme-toggle input:checked ~ .theme-toggle__text .theme-toggle__text-light { color: var(--muted); font-weight: 500; }
.theme-toggle input:checked ~ .theme-toggle__text .theme-toggle__text-dark  { color: var(--primary); font-weight: 700; }

/* Press feedback + focus */
.theme-toggle:hover .theme-toggle__text-dark,
.theme-toggle:hover .theme-toggle__text-light { filter: saturate(1.05) }
.theme-toggle:active .theme-toggle__track .theme-toggle__thumb { transform: translateX(0) scale(.96) }
.theme-toggle:active input:checked + .theme-toggle__track .theme-toggle__thumb { transform: translateX(32px) scale(.96) }
.theme-toggle input:focus-visible + .theme-toggle__track { outline:none; box-shadow:0 0 0 3px var(--ring); border-color:var(--primary); }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .theme-toggle__thumb,
  .theme-toggle__icon,
  .theme-toggle__text-light,
  .theme-toggle__text-dark,
  .theme-toggle__track { transition: none !important; }
  .theme-toggle__thumb.ripple::after { transition: none; }
}

/* SR-only live region utility (placed here for proximity to toggle) */
.sr-only{
  position:absolute !important; width:1px; height:1px;
  padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0);
  white-space:nowrap; border:0;
}
